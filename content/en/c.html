<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get the fragment from the URL and remove the '#'
        let fragment = window.location.hash.substring(1);
        // Exit if no fragment is present
        if (!fragment) return;

        // Split fragment by '~'
        let components = fragment.split("~");

        // TODO: Validate / error detect
        let name = components[0];

        // Find all elements with data-placeholder attributes
        document.querySelectorAll("[data-placeholder-label]").forEach((element, index) => {
            element.innerHTML = name;
        });

        document.querySelector("[data-placeholder-url]").innerHTML = window.location;
        document.querySelector("[data-placeholder-url]").href = window.location;
    });
</script>

<div class="mt-6">
    <h2>Offer from <span data-placeholder-label></span></h2>
    <p>
        <span data-placeholder-label></span> is offering to share their contact details and locations with you.
        If you have not installed Coagulate yet, see the instructions below.
        Otherwise, open this link on your phone, paste it or scan the QR code in the Coagulate app under "Contacts >
        Accept invite" to accept their sharing offer.
    </p>
    <p>
        <a data-placeholder-url></a>
    </p>
    <div data-placeholder-qrcode></div>
    <script type="text/javascript" src="/js/davidshimjs-qrcodejs-04f46c6/qrcode.min.js"></script>
    <script type="text/javascript">
        new QRCode(document.querySelector("[data-placeholder-qrcode]"), `${window.location}`);
    </script>

    <h2 class="title is-4">Install Coagulate</h2>
    <p>
        Coming soon to your favorite app store...
        <!-- <a target="_blank" href="https://apps.apple.com/de/app/coagulate/id000000">
        <img style="height:3rem;" src="/img/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg">
    </a>
    <a target="_blank" href="https://play.google.com/store/apps/details?id=social.coagulate.app">
        <img style="height:3rem;" src="/img/playstore_en_badge_web_generic.png">
    </a> -->
    </p>

    <h2 class="title is-4 mt-6">Build from Source</h2>
    <p>
        <a href="https://github.com/LGro/coagulate" target="_blank">
            <img src="/img/github-mark.svg" style="height:3rem;">
            <br>
            github.com/LGro/coagulate
        </a>
    </p>
</div>