<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get the fragment from the URL
        let fragment = window.location.hash.substring(1); // Remove the '#'
        if (!fragment) return; // Exit if no fragment is present

        // Split fragment by '~'
        let components = fragment.split("~");

        // TODO: Validate / error detect
        let label = decodeURIComponent(components[0]);

        // Find all elements with data-placeholder attributes
        document.querySelectorAll("[data-placeholder-label]").forEach((element, index) => {
            element.innerHTML = label;
        });

        document.querySelector("[data-placeholder-url]").innerHTML = window.location;
        document.querySelector("[data-placeholder-url]").href = window.location;
    });
</script>

<div class="mt-6">
    <h2>Invite from <span data-placeholder-label></span></h2>
    <p>
        Follow these steps to connect with others from <span data-placeholder-label></span>.
    </p>
    <h3>1. Install Coagulate</h3>
    <p>
        If you did not install the Coagulate app yet, follow the instructions you received alongside this invite link to
        get the app.
    </p>
    <h3>2. Accept invite</h3>
    <p>
        Paste the invite link in the app under "Contacts > Accept invite" or scan the QR code below.
    </p>
    <p style="word-break: break-all;">
        <a data-placeholder-url></a>
    </p>
    <div data-placeholder-qrcode></div>
    <script type="text/javascript" src="/js/kjua.min.js"></script>
    <script type="text/javascript">
        document.querySelector("[data-placeholder-qrcode]").appendChild(kjua({ text: `${window.location}` }));
    </script>
    <h3>3. Set up sharing</h3>
    <p>
        After you have accepted the invitation in Coagulate, a circle named "<span data-placeholder-label></span>" will
        appear in the app and automatically be populated with others who were invited along with you as they accept
        their invites as well.
        You can add contact details, locations, and configure which to share with this new circle.
    </p>
</div>