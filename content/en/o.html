<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get the fragment from the URL and remove the '#'
        let fragment = window.location.hash.substring(1);
        // Exit if no fragment is present
        if (!fragment) return;

        // Split fragment by '~'
        let components = fragment.split("~");

        // TODO: Validate / error detect
        let name = decodeURIComponent(components[0]);

        // Find all elements with data-placeholder attributes
        document.querySelectorAll("[data-placeholder-label]").forEach((element, index) => {
            element.innerHTML = name;
        });

        document.querySelector("[data-placeholder-url]").innerHTML = window.location;
        document.querySelector("[data-placeholder-url]").href = window.location;
    });
</script>

<div class="mt-6">
    <h2>Offer from <span data-placeholder-label></span></h2>

    <p>
        <span data-placeholder-label></span> has used your Reunicorn profile link to generate a personalized sharing
        offer for you.
        Open this link on your phone, paste it or scan the QR code in Reunicorn under "Contacts > Accept invite" to
        accept their sharing offer.
    </p>
    <p style="word-break: break-all;">
        <a data-placeholder-url></a>
    </p>
    <div data-placeholder-qrcode></div>
    <script type="text/javascript" src="/js/kjua.min.js"></script>
    <script type="text/javascript">
        document.querySelector("[data-placeholder-qrcode]").appendChild(kjua({ text: `${window.location}` }));
    </script>
</div>